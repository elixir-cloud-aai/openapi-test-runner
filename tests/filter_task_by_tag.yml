name: Filter Task by Tag Job
description: Job to test the filter task by tag feature
service: TES
versions:
  - 1.1.0
tags:
  - logical
  - filter
  - filter task by tag test
  - all
jobs:
  - name: create_task
    description: Create a new TES task
    endpoint: /tasks
    operation: POST
    request_body: |
      {
        "name": "ComplianceTest",     
        "description": "Compliance Test",
        "executors": [
          {
            "image": "alpine",
            "command": [
              "echo",
              "hello"
            ]
          }
        ],
        "tags": {
          "foo": "bar",
          "baz": "bat",
          "lorem": "ipsum",
          "task": "create"
        }
      }
    response:
      200:
  - name: list_tasks
    description: Retrieve the list of tasks tracked by the TES server
    endpoint: /tasks
    operation: GET
    query_parameters:
      - view: BASIC
      - tag_key: [foo, lorem, baz]
      - tag_value: [bar, ipsum]
    filter:
      value: |
        {
          "foo": "bar",
          "baz": "bat",
          "lorem": "ipsum",
          "task": "create"
        }
      path: $response.tasks[0].tags
    response:
      200: